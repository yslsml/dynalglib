import pytest
from dynalglib import TSP


@pytest.mark.parametrize(
    "distance_matrix, min_distance",
    [
        (
            [
                [0, 3, 10, 1, 4],
                [3, 0, 4, 1, 5],
                [10, 4, 0, 3, 2],
                [1, 1, 3, 0, 6],
                [4, 5, 2, 6, 0],
            ],
            12,
        ),
        (
            [
                [0, 81, 25, 61, 85, 50, 33, 23, 8, 18],
                [81, 0, 89, 65, 66, 41, 69, 37, 4, 88],
                [25, 89, 0, 32, 42, 85, 36, 60, 74, 79],
                [61, 65, 32, 0, 100, 23, 46, 75, 52, 100],
                [85, 66, 42, 100, 0, 4, 99, 86, 2, 67],
                [50, 41, 85, 23, 4, 0, 33, 22, 8, 10],
                [33, 69, 36, 46, 99, 33, 0, 3, 100, 88],
                [23, 37, 60, 75, 86, 22, 3, 0, 18, 45],
                [8, 4, 74, 52, 2, 8, 100, 18, 0, 65],
                [18, 88, 79, 100, 67, 10, 88, 45, 65, 0],
            ],
            181,
        ),
    ],
)
def test_tsp(distance_matrix, min_distance) -> None:
    tps = TSP(distance_matrix)
    tps.solve()
    assert tps.min_distance == min_distance
